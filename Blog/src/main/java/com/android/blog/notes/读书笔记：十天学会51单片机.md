
"好记性不如烂笔头"，读书笔记系列是为了记录自己的读书心得，文章内容一部分是摘抄原文，一部分是自己的理解和总结

本篇文章记录的是，来自郭天祥老师的《十天学会51单片机》视频课

### 一、写在前面

前段时间我在网上买了块 51 单片机开发板，买它最初的想法是，通过单片机来了解：程序是如何执行的？

接下来的两周，每天下了班回家的第一件事，就是跟着郭天祥老师的《十天学会51单片机》视频鼓捣一会儿，家里每天都是蜂鸣器滴滴滴~滴滴滴的声音..

但是，直到我能控制8位数码管显示数字以后，我才意识到，哦~ 原来这是偏实践类的课程，和我原定的目标相差甚远。于是，后面的串口、液晶屏啥的我就没有继续学了

本篇文章共包含两部分内容：

一是课程简介，介绍郭天祥老师的《十天学会51单片机》每小讲的课程内容

二是课程总结，主要是聊聊我个人非常疑惑的一个问题：单片机是如何执行代码的？

好，接下来我们先跟随郭天祥老师的脚步，一起来学习怎么控制单片机

### 二、十天学会51单片机

《十天学会51单片机》课程一共有13讲，每一讲的内容都是基于 tx-1c 开发板展开，因此，在介绍课程内容之前，我们有必要先来了解  tx-1c 开发板的构成

如图，介绍各个元器件

每一个元器件的功能、原理课程内容都有介绍，单片机的学习要点如下：

- 最小系统必要条件：电源、晶振、复位电路
- 控制任意I/O口：输出控制电平高低、输入检测电平高低
- 掌握定时器的用法
- 掌握外部中断、定时器中断、串口中断
- 串口通信：单片机与单片机、单片机与计算机通信

整个课程内容大致是这些，从目录来看还是比较简单的，具备控制这些简单设备的能力以后，其他复杂的功能原理上也都差不多

#### 点亮一个发光管

课程的第一讲是，老师的个人介绍，单片机的发展史，以及介绍单片机能做什么？

在课程结尾，老师带领我们点亮了一个发光二极管。由于代码过于简单，我顺手控制了剩下的7个发光管，并制作了一个流水灯的程序送给老师，代码如下：

``` c
#include <reg52.h>

sbit led1 = P1^0;
...// 中间还有 6 个灯，忽略重复代码
sbit led8 = P1^7;

unsigned int index = 0;
unsigned int toggle = 1;

void main(){
	while(1){
		perform_once();// 控制发光二极管亮灭
		delay();// 休眠一段时间
	}
}

void perform_once(){

	if(index>=8){ // 让每个发光二极管，一轮亮，一轮灭
		index = 0;
		toggle = toggle == 1 ? 0 : 1;
	}

	switch(index){
		case 0:led1 = toggle;
		...
		case 8:led8 = toggle;
	}
	index++;
}

void delay(){
	unsigned int cnt = 11000;
	while(cnt--);
}

```

编写完上述代码以后，我们在 xxx 中将 c 文件编译成 xx 文件

再通过 xxx 软件烧录到开发板中，板子重新上电，就可以看到代码效果了

我是效果图

#### 控制蜂鸣器发声

第二讲在学习蜂鸣器开始之前，老师先接着上节课的内容，带着我们一起实现了发光二极管的流水灯效果

这我可是在上节课就搞定了，我真是个懂得未雨绸缪挖地道的好孩子

接着，老师教了我们怎么去控制蜂鸣器，然后就是蜂鸣器发声实战了，代码也很简单

``` c
#include <reg52.h>

sbit beep = P2^3;

void main(){
	while(1){
		perform_once();// 让蜂鸣器配合发光二极管，滴滴滴~
		delay();// 休眠一段时间
	}
}

void perform_once(){
	if(index>=8){ 
		index = 0;
		toggle = toggle == 1 ? 0 : 1;
	}
	
	beep = toggle;

}
```

这里是直接在原先控制 LED 的基础上，增加了控制蜂鸣器的逻辑。让蜂鸣器当背景音乐，配合发光二极管流水灯一起发声

编写完上述代码以后，我们在 xxx 中将 c 文件编译成 xx 文件

再通过 xxx 软件烧录到开发板中，板子重新上电，就可以看到代码效果了

我是效果图

#### 数码管显示、中断原理和定时器的应用

第三讲的内容比较多，有中断、定时器的原理，还有数码管的控制显示，其中数码管的段选和位选让我反应了好一会才理解

接下来就是动手实践了，我在二极管、蜂鸣器的基础上又加了数码管的显示逻辑，另外还写了一个检测外部中断的程序，这两段代码都比较长我就不放出来了，直接来看效果

我是图片

从第三讲之后的课程我是开2倍速看完的，而且课程的代码我也没有自己手写，后面的可能内容包括：独立键盘、矩阵键盘、串口通信

没有动手写代码是因为，前面几节课程我已经学会了：

1. 如何控制输出电平进而控制发光二极管、蜂鸣器
2. 如何检测输入电平
3. 如何使用中断、定时器

再学会控制后面的几个元器件对我来说意义不是很大。。

好了，《十天学会51单片机》课程到这里就结束了，对剩下课程感兴趣的朋友可以自己去动手实践

接下来我们进入下一个话题：单片机是如何执行代码的？

### 三、单片机是如何执行代码的？

在前面的课程中，每次写完代码，我们都需要先用 xx 软件，将 c 文件编译成 xx 文件

再通过 xxx 软件烧录到开发板中，板子重新上电以后，就可以看到代码效果了

我们把流程拆解出来，会发现单片机的运行流程大致可以分为编码、编译、烧录、运行这四个阶段

编写完上述代码以后，我们在 xxx 中将 c 文件编译成 xx 文件

#### 编码阶段

首先要说明，这里的单片机指的是51单片机，使用的是 Intel 8051指令系统，我手里的这块板子，STC89C52RC

51单片机性能过于孱弱，没有跑操作系统的意义，所以，在单片机开发的时候也没有多进程、多线程的概念，代码写起来非常简单

通常是在 main() 函数实现一个死循环，如果不写

#### 编译阶段

#### 烧录阶段

#### 运行阶段

理解单片机的执行过程，对下一阶段（操作系统）的学习有很大的帮助。操作系统最重要的任务之一，就是管理 CPU 执行多任务

从单片机的角度来看，操作系统就是一个很大的应用程序

### 四、结语

对于我不熟悉的领域，我的期望是讲的越简单，越入门越好，这一点《十天学会51单片机》符合

优点是简单易懂，只需要有一点点语言基础，会不会 C/C++，对于我不熟悉的东西，我都习惯把自己当”傻瓜“，讲的越简单，越入门越好

总的来说，郭天祥老师的《十天学会51单片机》课程，适合已经有理论基础的科班出身学生学习，因为它更像是培训机构快速上手的实践课，

课程总结，不过也不能说是缺点，这不是课程的问题，是我的问题

如果像我一样，妄想通过这节课学习，可以放弃了


一句话总结，有帮助，但不大

我觉得可以把我的笔记分享出来，一来，二来如果有和我一样的想法，这篇笔记说不定会可以帮助一些读者少走点弯路

笔记的意思是，除了我以外，其他人可能并不能从这一堆乱七八糟的文字中，获取到太多有用的信息。不过，我会尽力让它读起来是顺畅的

从今年的十一假期到现在，近一个月的时间，我读完了李忠老师的《穿越计算机的迷雾》（第二版）

还买了 51 单片机，


水文章真爽