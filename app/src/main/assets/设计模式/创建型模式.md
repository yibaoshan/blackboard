
### 单例模式

Java 里面的几种实现方式

- 饿汉式
- 懒汉式的静态内部类实现，推荐
- 懒汉式的双重校验锁 DCL 实现，加不加 volatile 取决于 java 版本；jdk8 中已经确保 new 初始化为原子性操作
- java 1.5 增加了枚举类，不可被破坏

注意，除了枚举单例，其他几种类型均可以通过反射的方式

创建出一个一模一样的实例对象，以此来破坏单例在进程中的唯一性


### 工厂方法

**工厂类**

- 角色1：抽象工厂类，定义工厂的接口，用于返回一个产品
  - Iterable
- 角色2：工厂实现类，实现工厂接口
  - HashMap
  - ArrayList


**产品类**

- 角色3：抽象产品类，定义产品的接口
  - Iterator
- 角色4：产品实现类，实现了产品接口
  - ArrayList 中的 Itr 类
  - HashMap 中的 EntryIterator / KeyIterator / ValueIterator 类


说明1：ArrayList 和 HashMap 中的 iterator() 方法其实就相当于一个工厂方法，专为 new 对象而生，这里 iterator 方法是构造并返回一个具体的 迭代器

说明2：把工厂方法的 "抽象工厂" 部分删除掉，就是简单工厂模式，不过多介绍


抽象工厂




工厂实现





抽象产品




产品实现(jdk1.8)





- ****：在集合框架中，Iterable 作为父类 ，ArrayList 中的 Itr 类，HashMap中的 EntryIterator / KeyIterator / ValueIterator类，作为实现类
- **抽象工厂**：和 "工厂方法" 比，"抽象工厂" 拥有多个抽象产品类，可自由组合
- **建造者模式**：AlertDialog 的 Builder


