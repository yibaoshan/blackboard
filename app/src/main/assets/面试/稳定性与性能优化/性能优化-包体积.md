
控制包体积的思路比较简单粗暴：删！删不了就尽量小

终极方案：插件化

## 删！

- 动态下发：字体包、H5离线包、图片、so等一些资源类的文件

## 小！

- 使用 tinypng 压缩
- target 大于 Android 4.0 的可以把图片资源转为 webp
- 对于闪屏，背景图等不带透明度的png图片，统统转成有损的jpg
- 配置代码混淆，减小 dex 文件大小
- 禁止枚举类：减少一个 ENUM 可减少大约 1.0 到 1.4 KB的大小
- 减少模板代码：Databinding、ViewBinding、ButterKnife 自动生成模板代码，导致增大了class 代码
- abiFilters 分包：对于支持分包的应用商店，分别上传 32 / 64 位的应用
- 尽量避免使用帧动画
- 项目中的语音播报文件wav、mp3和aac格式可以进行压缩优化 ，降低采样率
- 项目中可能为了某些特殊需求需要用到一些特殊的字体，但应用场景很少，我们可以考虑精简字体包

## 监控与预警

有了阶段性成果以后，接下来是怎么保持包体积的健康度

我们通常使用腾讯的 Matrix APK Checker 查看每次发版 apk 的各个目录的详细数据

记录下和上次版本的区别，哪些目录体积多了，哪些少了